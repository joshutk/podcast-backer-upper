#!/bin/bash
# Convenience wrapper for podcast_backup.py
# Automatically uses the correct virtual environment

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VENV_PATH="$HOME/.local/venvs/podcast-backup"

# Check if venv exists
if [ ! -d "$VENV_PATH" ]; then
    echo "Setting up virtual environment..."
    python3 -m venv "$VENV_PATH"
    source "$VENV_PATH/bin/activate"
    pip install -q feedparser requests mutagen
else
    source "$VENV_PATH/bin/activate"
fi

python "$SCRIPT_DIR/podcast_backup.py" "$@"
